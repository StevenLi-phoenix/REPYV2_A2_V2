# Test concurrent reads
f = openfile("multi", True)
f.writeat("v0", 0)
f.close()

f = openfile("multi", True)
f.writeat("v1", 0)
f.close()

# Try to open base and v1 simultaneously for reading
fbase = openfile("multi", False)
fv1 = openfile("multi.v1", False)

c1 = fbase.readat(None, 0)
c2 = fv1.readat(None, 0)

if c1 == "v0":
    log("PASS: Can read from base\n")
if c2 == "v1":
    log("PASS: Can read from v1\n")

fv1.close()
fbase.close()
