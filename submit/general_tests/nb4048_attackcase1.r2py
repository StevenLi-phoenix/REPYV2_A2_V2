# --- Create first version of "testfile" ---
# Calling openfile with create=True should create a new version.
f1 = openfile("testfile", True)

# Write initial content at offset 0.
f1.writeat("HelloWorld", 0)

# Close the file to finalize the first version's contents.
f1.close()

# --- Create second version of "testfile"  ---
# Calling openfile again with create=True should create the next version, and copy the previous version's contents into the new version.
f2 = openfile("testfile", True)

# Read the entire file from offset 0 (pass None to read the whole file) and verify the copy occurred.
assert f2.readat(None, 0) == "HelloWorld"

# Close v2.
f2.close()