basename = 'testfile.txt'

f0 = openfile(basename, True)
f0.writeat('a'*30,0)
f0.close()

f1 = openfile(basename, True)
f1.writeat('b'*30,0)
f1.close()

f1 = openfile(basename + ".v1", False)
try:
    f1.writeat('a'*20,10)
    # able to have 2 latest versions
    f2 = openfile(basename, True)
    f2.writeat('c'*30,0)
    f2.close()
    raise ValueError("this shouldn't have worked")
except:
    assert True
f1.close()