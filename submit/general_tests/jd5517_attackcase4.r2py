# jd5517_attackcase4.r2py
# cannot create new version while latest is open

h = openfile("case4_base", True)
h.writeat("x", 0)

threw = False
try:
    try:
        openfile("case4_base", True)
    except FileInUseError:
        threw = True
finally:
    try:
        h.close()
    except:
        pass

assert threw
