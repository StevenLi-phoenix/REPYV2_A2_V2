# Test listfiles
f = openfile("normal", True)
f.writeat("test", 0)
f.close()

# Version it
f2 = openfile("normal", True)
content = f2.readat(None, 0)
if content != "test":
    log("ERROR: Version should copy content\n")
    exitall()
f2.close()

# Verify listfiles
files = listfiles()
log("Files: " + str(files) + "\n")

if "normal" not in files:
    log("ERROR: Base file should be in listfiles\n")
    exitall()

if "normal.v1" in files:
    log("ERROR: Version should not be in listfiles\n")
    exitall()

log("PASS: listfiles works correctly\n")
